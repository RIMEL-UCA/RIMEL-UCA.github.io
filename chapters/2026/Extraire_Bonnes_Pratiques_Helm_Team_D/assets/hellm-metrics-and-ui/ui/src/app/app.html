<div class="app-container p-6 flex flex-col" style="height: 100dvh; width: 100vw;">
  <div class="controls flex flex-col gap-4 mb-6 shrink-0">
    <div class="flex flex-col gap-2 w-64">
      <label for="graph-select" class="font-semibold text-lg">Select Chart:</label>
      <p-select
        id="graph-select"
        [ngModel]="selectedGraphName$ | async"
        [options]="names"
        (onChange)="onGraphSelect($event)"
        placeholder="Choose a graph...">
      </p-select>
    </div>
  </div>

  <div class="content-container w-full flex-1 min-h-0 min-h-0 overflow-hidden">
    <p-tabs value="0" [style]="{ 'height': '100%', 'display': 'flex', 'flex-direction': 'column' }">
      <p-tablist>
        <p-tab value="0">
          <i class="pi pi-chart-scatter mr-2"></i>
          Graph View
        </p-tab>
        <p-tab value="1">
          <i class="pi pi-chart-bar mr-2"></i>
          Data View
        </p-tab>
      </p-tablist>
      <p-tabpanels [style]="{ 'flex': '1', 'min-height': '0', 'overflow': 'hidden' }">
        <p-tabpanel value="0" [style]="{ 'height': '100%' }">
          @if (selectedGraph$ | async; as graph) {
            <app-graph [graphInput]="graph"></app-graph>
          } @else {
            <p class="text-gray-500 text-center py-8">No graph selected</p>
          }
        </p-tabpanel>
        <p-tabpanel value="1" [style]="{ 'height': '100%' }">
          <app-data-view [selectedChartName]="selectedChartName"></app-data-view>
        </p-tabpanel>
      </p-tabpanels>
    </p-tabs>
  </div>
</div>

<router-outlet></router-outlet>
